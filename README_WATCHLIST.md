# è‡ªé¸è‚¡æ‘˜è¦åŠŸèƒ½

## åŠŸèƒ½æ¦‚è¿°

è‡ªé¸è‚¡æ‘˜è¦åŠŸèƒ½å¯ä»¥ç‚ºç”¨æˆ¶çš„è‡ªé¸è‚¡æ¸…å–®ç”¢ç”Ÿå®Œæ•´çš„åˆ†æå ±å‘Šï¼ŒåŒ…å«å››å€‹ä¸»è¦å€å¡Šï¼š

1. **ç”¢æ¥­åˆ†å¸ƒçµ±è¨ˆ** - çµ±è¨ˆè‡ªé¸è‚¡çš„ç”¢æ¥­åˆ†å¸ƒ
2. **è‚¡åƒ¹æ‘˜è¦** - è¨ˆç®—å„è‚¡ç¥¨çš„å ±é…¬ç‡ä¸¦ä»¥è¡¨æ ¼å‘ˆç¾
3. **å ±é…¬ç‡çµ±è¨ˆåˆ†æ** - åˆ†ææ•´é«”å ±é…¬ç‡çµ±è¨ˆè³‡æ–™
4. **ç•°å‹•ç„¦é»å€‹è‚¡** - æœå°‹æ¯æª”è‚¡ç¥¨çš„æœ€æ–°æ¶ˆæ¯ä¸¦ç”¢ç”Ÿæ‘˜è¦

## æ¶æ§‹èªªæ˜

### å¾Œç«¯æ¶æ§‹

```
ai-chatbot-proxy/
â”œâ”€â”€ langgraph_app/nodes/
â”‚   â”œâ”€â”€ generate_section_industry_distribution.py    # ç”¢æ¥­åˆ†å¸ƒçµ±è¨ˆ
â”‚   â”œâ”€â”€ generate_section_price_summary.py           # è‚¡åƒ¹æ‘˜è¦
â”‚   â”œâ”€â”€ generate_section_return_analysis.py         # å ±é…¬ç‡çµ±è¨ˆåˆ†æ
â”‚   â”œâ”€â”€ generate_section_focus_stocks.py            # ç•°å‹•ç„¦é»å€‹è‚¡
â”‚   â””â”€â”€ generate_watchlist_summary_pipeline.py      # æ•´åˆ Pipeline
â”œâ”€â”€ routes/answer.py                                # API è·¯ç”±
â””â”€â”€ schemas.py                                      # è³‡æ–™çµæ§‹å®šç¾©
```

### å‰ç«¯æ¶æ§‹

```
ai_chat_twstock/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ watchlist/page.tsx                          # è‡ªé¸è‚¡æ‘˜è¦é é¢
â”‚   â”œâ”€â”€ api/watchlist-summary/route.ts              # å‰ç«¯ API è·¯ç”±
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ WatchlistSummaryCard.tsx                # è‡ªé¸è‚¡æ‘˜è¦çµ„ä»¶
```

## API ä½¿ç”¨æ–¹å¼

### å¾Œç«¯ API

**ç«¯é»ï¼š** `POST /watchlist-summary`

**è«‹æ±‚æ ¼å¼ï¼š**
```json
{
  "stock_list": [2303, 2330, 2610, 2376, 2317],
  "userId": "user123"
}
```

**å›æ‡‰æ ¼å¼ï¼š**
```json
{
  "success": true,
  "sections": [
    {
      "title": "ç”¢æ¥­åˆ†å¸ƒçµ±è¨ˆ",
      "content": "ğŸ·ï¸ ç”¢æ¥­åˆ†å¸ƒçµ±è¨ˆ\n\tâ€¢\té›»å­ï¼ˆåŠå°é«”ã€PCï¼‰ï¼š5 æª”\n\tâ€¢\tç”ŸæŠ€é†«ç™‚ï¼š2 æª”",
      "cards": [...],
      "sources": [...]
    },
    ...
  ],
  "logs": ["æ­¥é©Ÿ 1: ç”¢ç”Ÿç”¢æ¥­åˆ†å¸ƒçµ±è¨ˆ", "æ­¥é©Ÿ 2: ç”¢ç”Ÿè‚¡åƒ¹æ‘˜è¦", ...]
}
```

### å‰ç«¯ API

**ç«¯é»ï¼š** `POST /api/watchlist-summary`

**ä½¿ç”¨æ–¹å¼ï¼š**
```javascript
const response = await fetch('/api/watchlist-summary', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    stock_list: [2303, 2330, 2610],
    userId: 'user123'
  }),
});

const data = await response.json();
```

## åŠŸèƒ½ç‰¹è‰²

### 1. ç”¢æ¥­åˆ†å¸ƒçµ±è¨ˆ
- å¾ Finlab å–å¾—å…¬å¸åŸºæœ¬è³‡è¨Š
- çµ±è¨ˆè‡ªé¸è‚¡çš„ç”¢æ¥­åˆ†å¸ƒ
- é¡¯ç¤ºå„ç”¢æ¥­çš„è‚¡ç¥¨æ•¸é‡

### 2. è‚¡åƒ¹æ‘˜è¦
- è¨ˆç®— 1æ—¥ã€5æ—¥ã€20æ—¥ã€60æ—¥ã€240æ—¥å ±é…¬ç‡
- ä»¥è¡¨æ ¼å½¢å¼å‘ˆç¾ï¼Œæ”¯æ´é¡è‰²æ¨™ç¤º
- æ­£æ•¸å ±é…¬ç‡é¡¯ç¤ºç´…è‰²ï¼Œè² æ•¸é¡¯ç¤ºç¶ è‰²

### 3. å ±é…¬ç‡çµ±è¨ˆåˆ†æ
- çµ±è¨ˆä¸Šæ¼²/ä¸‹è·Œå®¶æ•¸
- è¨ˆç®—å¹³å‡å ±é…¬ç‡
- æ‰¾å‡ºæœ€å¤§æ¼²å¹…è‚¡ç¥¨

### 4. ç•°å‹•ç„¦é»å€‹è‚¡
- ä½¿ç”¨ Serper API æœå°‹æ¯æª”è‚¡ç¥¨æœ€æ–°æ¶ˆæ¯
- æ™ºèƒ½åˆ†ææœå°‹çµæœï¼Œæå–ä¸»é¡Œ
- çµåˆå ±é…¬ç‡è³‡è¨Šç”¢ç”Ÿæ‘˜è¦
- ç‚ºé¿å… API æ•ˆèƒ½å•é¡Œï¼Œåªè™•ç†å‰ 5 æª”è‚¡ç¥¨

## éƒ¨ç½²èªªæ˜

### 1. å¾Œç«¯éƒ¨ç½²
```bash
cd ai-chatbot-proxy
python main.py
```

### 2. å‰ç«¯éƒ¨ç½²
```bash
cd ai_chat_twstock
npm run dev
```

### 3. ç’°å¢ƒè®Šæ•¸
ç¢ºä¿ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸å·²è¨­å®šï¼š
- `OPENAI_API_KEY` - OpenAI API é‡‘é‘°
- `SERPER_API_KEY` - Serper API é‡‘é‘°
- Finlab ç™»å…¥è³‡è¨Š

## æ¸¬è©¦

### 1. æ¸¬è©¦ Pipeline
```bash
cd ai-chatbot-proxy
python test_watchlist.py
```

### 2. æ¸¬è©¦å®Œæ•´æµç¨‹
```bash
cd ai-chatbot-proxy
python test_watchlist_complete.py
```

## æ³¨æ„äº‹é …

1. **Finlab ç™»å…¥**ï¼šéœ€è¦å…ˆç™»å…¥ Finlab æ‰èƒ½å–å¾—è³‡æ–™
2. **API é™åˆ¶**ï¼šç•°å‹•ç„¦é»å€‹è‚¡åŠŸèƒ½æœƒå‘¼å« Serper APIï¼Œæœ‰æ¬¡æ•¸é™åˆ¶
3. **è³‡æ–™ä¾†æº**ï¼šæ‰€æœ‰è³‡æ–™ä¾†æºéƒ½æœƒåœ¨å ±å‘Šä¸­æ¨™ç¤º
4. **éŒ¯èª¤è™•ç†**ï¼šå„æ­¥é©Ÿéƒ½æœ‰éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ï¼Œå–®ä¸€æ­¥é©Ÿå¤±æ•—ä¸æœƒå½±éŸ¿æ•´é«”æµç¨‹

## æœªä¾†æ”¹é€²

1. **å¿«å–æ©Ÿåˆ¶**ï¼šåŠ å…¥è³‡æ–™å¿«å–ï¼Œæ¸›å°‘é‡è¤‡ API å‘¼å«
2. **æ›´å¤šåˆ†æ**ï¼šåŠ å…¥æŠ€è¡“åˆ†æã€ç±Œç¢¼åˆ†æç­‰
3. **è‡ªè¨‚æ™‚é–“ç¯„åœ**ï¼šè®“ç”¨æˆ¶å¯ä»¥è‡ªè¨‚åˆ†æçš„æ™‚é–“ç¯„åœ
4. **åŒ¯å‡ºåŠŸèƒ½**ï¼šæ”¯æ´ PDF æˆ– Excel åŒ¯å‡º
5. **å³æ™‚æ›´æ–°**ï¼šæ”¯æ´å³æ™‚è³‡æ–™æ›´æ–° 